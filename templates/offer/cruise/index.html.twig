{% extends 'base.html.twig' %}

{% block javascripts %}
	<!-- Theme JS files -->
	<script src="{{ asset("global_assets/js/plugins/tables/datatables/datatables.min.js")}}"></script>
	<script src="{{ asset("global_assets/js/plugins/forms/selects/select2.min.js")}}"></script>
	<script src="{{asset("global_assets/js/demo_pages/datatables_basic.js")}}"></script>
	<!-- /theme JS files -->
{% endblock %}
{% block title %}Cruise list
{% endblock %}
{% block menu %}
	<h4>
		<i class="icon-arrow-left52 mr-2"></i>
		<span class="font-weight-semibold">Home</span>
		- Cruise
	</h4>
{% endblock %}
{% block menu_petit %}
	<div class="breadcrumb">
		<a href="index.html" class="breadcrumb-item">
			<i class="icon-home2 mr-2"></i>
			Home</a>
		<span class="breadcrumb-item active">Cruise  - Cruise management
		</span>
	</div>
{% endblock %}


{% block content %}


	<!-- Basic datatable -->
	<div class="card">
		<div class="card-header header-elements-inline">
			<h5 class="card-title">Cruise list</h5>
			<div class="header-elements">
				<div class="list-icons">

					{% if is_granted ('ROLE_ADMIN') %}
						<a href="{{path('app_cruise_new')}}" class="nav-link">

							<button type="submit" class="btn btn-success">
								<b>
									<i class="icon-plus3 mr-1"></i>
								</b>
								<big>Add cruise</big>
							</button>
						</a>
					{% elseif is_granted ('ROLE_AGENT') %}


						<a href="{{path('app_cruise_new_agence',{'id':app.user.agence.id})}}" class="nav-link">

							<button type="submit" class="btn btn-success">
								<b>
									<i class="icon-plus3 mr-1"></i>
								</b>
								<big>Add cruise</big>
							</button>
						</a>
					{% endif %}
				</div>

			</div>
		</div>

		<table class="table datatable-basic">
			<thead>
				<tr>
					<th>Id</th>
					<th>Title</th>
					<th>Picture</th>
					{# <th>Description</th>
															<th>Inclus</th>
															<th>nonInclus</th> #}
					{# <th>Country</th> #}
					<th>Countries</th>
					{# <th>Good Address</th> #}
				{# 	<th>Categories</th> #}
					<th>Agence</th>

					{# <th>Reviews</th> #}


					<th class="text-center">Actions</th>
				</tr>


			</thead>
			<tbody>
				{% for cruise in cruises %}
					<tr>
						<td>{{ cruise.id }}</td>
						<td>
							<a href="{{ path('app_cruise_show', {'id': cruise.id}) }}">{{cruise.title}}
							</a>
						</td>
						<td><img src="{{ asset('uploads/images/offer/picture/' ~ cruise.picture) }}" width="80" alt="No picture"></td>

						{# <td>{{ cruise.description |raw}}</td>
																		<td>{{ cruise.inclus |raw}}</td>
																		<td>{{ cruise.nonInclus |raw}}</td> #}

						{# <td>
																																								{% for countr in excursion.country %}
																																									{{ countr.entitled }}
																																								{% endfor %}
																																							</td> #}
						{# <td>{{ excursion.country.entitled }}</td> #}
							<td>
								{% for country in cruise.countries %}
							{{ country.intitule }}
						{% endfor %}
						</td>
						{# <td>{{ excursion.region.entitled }}</td> #}

						{# <td>{{ excursion.goodAddress }}</td> #}

						{# <td>
																			{% for goodAddress in cruise.goodAddress %}
																				{{ goodAddress.intitule }}
																			{% endfor %}
																		</td> #}
							{# <td>
								{% for category in cruise.categories %}
							{{ category.style }}
						{% endfor %}
						</td> #}<td>
						{{ cruise.agence.name }}
						</td>


						{# <td>{{ agent.reviews.comment}}</td> #}


							<td>
								<div class="row "> {% if is_granted ('ROLE_ADMIN') %}
									<a href="{{ path('app_cruise_edit', {'id': cruise.id}) }}" class="btn btn-primary btn-sm mr-1">
										<i class="icon-pencil7 mr-1"></i>

										Edit
									</a>
								{% elseif is_granted ('ROLE_AGENT') %}

									<a href="{{ path('app_cruise_edit_agence', {'cruise': cruise.id,'id':app.user.agence.id}) }}" class="btn btn-primary btn-sm mr-1">
										<i class="icon-pencil7 mr-1"></i>

										Edit
									</a>

								{% endif %}
								<a class="btn btn-danger btn-sm text-white " data-toggle="modal" data-target="#modal_Delete{{cruise.id}}">
									<i class="icon-bin mr-1"></i>

									Delete</a>
							</div>
						</td>
					</tr>
					<!-- Delete modal -->
					<div id="modal_Delete{{cruise.id}}" class="modal fade" tabindex="-1">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header bg-danger">
									<h5 class="modal-title">Deletion</h5>
									<button type="button" class="close" data-dismiss="modal">&times;</button>
								</div>

								<div
									class="modal-body">
									{# <h6 class="font-weight-semibold">Text in a modal</h6> #}
									<p>Are you sure to delete this cruise.</p>

								</div>

								<div class="modal-footer">
									<button type="button" class="btn btn-link" data-dismiss="modal">Close</button>
									<a href="{{ path('app_cruise_delete',{'id': cruise.id})}}">
										<button type="button" class="btn bg-danger">Delete</button>
									</a>
								</div>
							</div>
						</div>
					</div>
					<!-- /Delete modal -->
				{% else %}
					<tr>
						<td colspan="5">no records found</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>

{% endblock %}
