{% extends 'base.html.twig' %}

{% block javascripts %}
	<!-- Theme JS files -->
	<script src="{{ asset("global_assets/js/plugins/tables/datatables/datatables.min.js")}}"></script>
	<script src="{{ asset("global_assets/js/plugins/forms/selects/select2.min.js")}}"></script>

	<script src="{{asset("assets/js/app.js")}}"></script>
	<script src="{{ asset("global_assets/js/demo_pages/datatables_basic.js")}}"></script>
	<!-- /theme JS files -->
{% endblock %}
{% block title %}Show users
{% endblock %}


{% block content %}


	<!-- Basic datatable -->
	<div class="card">
		<div class="card-header header-elements-inline">
			<h5 class="card-title">Users list</h5>
			<div class="header-elements">
				<div class="list-icons">
					<a class="list-icons-item" data-action="collapse"></a>
					<a class="list-icons-item" data-action="reload"></a>
					<a class="list-icons-item" data-action="remove"></a>
				</div>
			</div>
		</div>

		<table class="table datatable-basic">
			<thead>
				<tr>
					<th>Id</th>
					<th>Email</th>
					<th>Password</th>
					<th>Lastname</th>
					<th>Roles</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody>
				{% for user in users %}
					<tr>
						<td>{{ user.id }}</td>
						<td>{{ user.email }}</td>
						<td>{{user.password}}</td>
						<td>{{ user.lastname}}</td>
						<td>
							{% for role in user.roles %}
								{% if role == "ROLE_USER" %}
									User
								{% elseif role == "ROLE_AGENT" %}
									Agent
								{% elseif role == "ROLE_ADMIN" %}
									Admin
								{% endif %}
							{% endfor %}
						</td>

						<td>
							<a href="{{ path('app_users_edit', {'id': user.id}) }}" class="btn btn-success">Edit</a>
							<a class="btn btn-light" data-toggle="modal" data-target="#modal_Delete">Delete</a>
						</td>
					</tr>
					<!-- Delete modal -->
					<div id="modal_Delete" class="modal fade" tabindex="-1">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title">Deletion</h5>
									<button type="button" class="close" data-dismiss="modal">&times;</button>
								</div>

								<div
									class="modal-body">
									{# <h6 class="font-weight-semibold">Text in a modal</h6> #}
									<p>Are you sure to delete this user.</p>

								</div>

								<div class="modal-footer">
									<button type="button" class="btn btn-link" data-dismiss="modal">Close</button>
									<a href="{{ path('app_users_delete' , {'id': user.id})}}">
										<button type="button" class="btn bg-primary">Delete</button>
									</a>
								</div>
							</div>
						</div>
					</div>
					<!-- /Delete modal -->
				{% else %}
					<tr>
						<td colspan="5">no records found</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>


{% endblock %}
